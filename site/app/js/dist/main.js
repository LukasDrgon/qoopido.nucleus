!function(e,t,n,i,o,r){"use strict";function a(n){n.configure({pattern:{"/nucleus":"//cdn.jsdelivr.net/qoopido.nucleus/1.0.2","/velocity":"//cdn.jsdelivr.net/velocity/1.2.3/velocity.min","/prism/js":"//cdn.jsdelivr.net/prism/1.2.0/prism.js","/prism/css":"//cdn.jsdelivr.net/prism/1.2.0/themes/prism-okaidia.css"},modules:{"/demand/handler/legacy":{"/velocity":{probe:function(){return e.Velocity}},"/prism/js":{probe:function(){return e.Prism}}}}});var i=Array.prototype.slice,a=t.documentElement,c=/(.+)\.(jp(e?)g|gif|png|webp)$/i,s=(t.location.hash||"#intro").substr(1),l={};return function(){var n=t.querySelector("#section-"+s),i=n.querySelector('[itemprop="image"]').getAttribute("content"),o=100*Math.ceil((e.innerWidth||a.clientWidth)/100),r=100*Math.ceil((e.innerHeight||a.clientHeight)/100),l=100*Math.min(2,e.devicePixelRatio||1).toFixed(2);n.style.backgroundImage="url("+i.replace(c,"$1."+o+"x"+r+"@"+l+".$2")+")",t.addEventListener("touchstart",function(e){"a"!==e.target.nodeName.toLowerCase()&&e.preventDefault()},!1),t.addEventListener("touchmove",function(e){e.preventDefault()},!1),t.addEventListener("touchend",function(e){e.preventDefault()},!1)}(),n("/nucleus/dom/element","/nucleus/support/css/property").then(function(u,d){function h(){var t="";for(l.width=100*Math.ceil((e.innerWidth||a.clientWidth)/100),l.height=100*Math.ceil((e.innerHeight||a.clientHeight)/100),l.dpr=Math.min(2,e.devicePixelRatio||1),k=0;w=W[k];k++)t+='a[id="'+w.hash+'"]:target ~ main { '+d("transform")[0]+": translateY(-"+w.offsetTop+"px); }",w.observe&&g(w);P.styleSheet?P.styleSheet.cssText=t:P.textContent=t}function p(e){f(e.deltaY)}function m(e){var t,n,i=e.timeStamp,o=e.originalEvent.targetTouches;switch(e.type){case"touchstart":1===o.length&&(A.started=i,A.oy=o[0].clientY);break;case"touchmove":1===o.length&&(A.moved=i,A.ly=o[0].clientY);break;case"touchend":A.moved?(t=A.ly-A.oy,n=t/(A.moved-A.started)||0,Math.abs(t)>10&&Math.abs(n)>.5?f(-t):new u(e.target).emit("click")):new u(e.target).emit("click"),A.started=null,A.moved=null;break;case"touchcancel":A.started=null,A.moved=null}}function f(e){b&&e&&(b[e>0?"next":"previous"](),W[b.index].marker.emit("click"))}function v(){var e=this;e.observe&&(e.style.backgroundImage="url("+e.image.replace(c,"$1."+l.width+"x"+l.height+"@"+100*l.dpr.toFixed(2)+".$2")+")")}function g(e){e.timeout&&r(e.timeout),e.timeout=o(v.bind(e),200)}function y(){this.setStyles({opacity:1,left:0,bottom:0})}var b,k,w,x,S,E=new u(e),j=new u(t.head||t.querySelector("head")),M=new u("body"),q=new u("<nav />",{itemscope:!0,itemtype:"http://schema.org/SiteNavigationElement",role:"navigation"}),P=t.createElement("style"),W=i.call(t.querySelectorAll('main [itemtype="http://schema.org/WebPageElement"]')),A={started:null,moved:null,oy:null,ly:null},T=[];for(n("/nucleus/function/debounce").then(function(e){E.on("mousewheel wheel",e(p,100)),E.on("touchstart touchmove touchend touchcancel",m)}),M.on("appear",'[itemtype="http://schema.org/WebPageElement"]',function(e,t){b&&1===t.priority&&b.seek(this.index),g(this),this.observe=!0}).on("disappear",'[itemtype="http://schema.org/WebPageElement"]',function(e,t){1===t.priority&&delete this.observe}).on("click",'[href="#snippet"]',function(e){var t=this;e.preventDefault(),e.stopPropagation(),n("./snippet").then(function(e){new e(t.parentNode)})}),k=0;w=W[k];k++)s=w.id.slice(8),x=t.querySelector("#"+w.id+' [itemprop="headline"]').textContent,w.hash=s,w.index=k,w.image=t.querySelector("#"+w.id+' [itemprop="image"]').getAttribute("content"),w.marker=new u("<a />",{href:"#"+s,itemprop:"url",title:x}).appendTo(q),w.setAttribute("data-hash",s),T.push(w.marker);for(q.insertBefore("#github"),j.append(P),k=0;S=T[k];k++)o(y.bind(S),25*k);n("/nucleus/dom/element/appear").then(function(e){for(k=0;w=W[k];k++)new e(w,{auto:2});n("/nucleus/function/debounce").then(function(e){E.on("resize orientationchange",e(h)).emit("resize")}),n("/nucleus/component/iterator").then(function(e){b=new e(null,{loop:!1}).on("preSeek postSeek",function(e){W[b&&b.index||0].marker.setAttribute("aria-selected","postSeek"===e?"true":"false")}).setData(W),n("./snippet")})})}),!0}i(["demand"],a)}(this,document,demand,provide,setTimeout,clearTimeout);
//# sourceMappingURL=main.js.map
