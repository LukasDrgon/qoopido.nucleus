{"version":3,"sources":["main.src.js"],"names":["global","demand","provide","definition","configure","pattern","/nucleus","/velocity","/prism/js","/prism/css","modules","/demand/handler/legacy","probe","Velocity","Prism","arrayPrototypeSlice","Array","prototype","slice","documentElement","document","regexMatchBasename","viewport","then","DomElement","DomElementAppear","ComponentIterator","functionDebounce","onResize","width","innerWidth","clientWidth","height","innerHeight","clientHeigh","dpr","devicePixelRatio","i","section","sections","observe","updateImage","style","backgroundImage","image","replace","toFixed","iterator","title","marker","window","body","navigation","itemscope","itemtype","role","call","querySelectorAll","markers","on","event","index","setAttribute","details","priority","seek","this","self","preventDefault","stopPropagation","Snippet","parentNode","querySelector","id","textContent","getAttribute","href","itemprop","left","opacity","setContent","appendTo","auto","push","setData","insertBefore","element","duration","easing","delay","getElementById"],"mappings":"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","file":"main.js","sourcesContent":["(function(global, demand, provide) {\n\t'use strict';\n\n\tfunction definition(demand) {\n\t\t// configure demand\n\t\t\tdemand\n\t\t\t\t.configure({\n\t\t\t\t\tpattern: {\n\t\t\t\t\t\t'/nucleus':   '/dist',\n\t\t\t\t\t\t'/velocity':  '//cdn.jsdelivr.net/velocity/1.2.3/velocity.min',\n\t\t\t\t\t\t'/prism/js':  '//cdn.jsdelivr.net/prism/1.2.0/prism.js',\n\t\t\t\t\t\t'/prism/css': '//cdn.jsdelivr.net/prism/1.2.0/themes/prism-okaidia.css'\n\t\t\t\t\t},\n\t\t\t\t\tmodules: {\n\t\t\t\t\t\t'/demand/handler/legacy': {\n\t\t\t\t\t\t\t'/velocity': {\n\t\t\t\t\t\t\t\tprobe: function() {\n\t\t\t\t\t\t\t\t\treturn global.Velocity;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'/prism/js': {\n\t\t\t\t\t\t\t\tprobe: function() {\n\t\t\t\t\t\t\t\t\treturn global.Prism;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\tvar arrayPrototypeSlice = Array.prototype.slice,\n\t\t\tdocumentElement     = document.documentElement,\n\t\t\tregexMatchBasename  = /(.+)\\.(jp(e?)g|hig|png|webp)$/i,\n\t\t\tviewport            = {};\n\n\t\tdemand('/nucleus/dom/element', '/nucleus/dom/element/appear', '/nucleus/component/iterator', '/nucleus/function/debounce').then(\n\t\t\tfunction(DomElement, DomElementAppear, ComponentIterator, functionDebounce) {\n\t\t\t\tvar window     = new DomElement(global),\n\t\t\t\t\tbody       = new DomElement('body'),\n\t\t\t\t\tnavigation = new DomElement('<nav />', { itemscope: true, itemtype: 'http://schema.org/SiteNavigationElement', role: 'navigation' }),\n\t\t\t\t\tsections   = arrayPrototypeSlice.call(document.querySelectorAll('main [itemtype=\"http://schema.org/WebPageElement\"]')),\n\t\t\t\t\tmarkers     = [],\n\t\t\t\t\titerator, i, section, title, marker;\n\n\t\t\t\tfunction onResize() {\n\t\t\t\t\tviewport.width  = global.innerWidth || documentElement.clientWidth;\n\t\t\t\t\tviewport.height = global.innerHeight || documentElement.clientHeigh;\n\t\t\t\t\tviewport.dpr    = global.devicePixelRatio || 1;\n\n\t\t\t\t\tfor(i = 0; section = sections[i]; i++) {\n\t\t\t\t\t\tif(section.observe) {\n\t\t\t\t\t\t\tupdateImage(section);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction updateImage(section) {\n\t\t\t\t\tsection.style.backgroundImage = 'url(' + section.image.replace(regexMatchBasename, '$1.' + viewport.width + 'x' + viewport.height + '@' + (viewport.dpr.toFixed(2) * 100) + '.$2') + ')';\n\t\t\t\t}\n\n\t\t\t\titerator = new ComponentIterator()\n\t\t\t\t\t.on('preSeek postSeek', function(event) {\n\t\t\t\t\t\tsections[iterator.index || 0].marker.setAttribute('aria-selected', event === 'postSeek' ? 'true' : 'false');\n\t\t\t\t\t});\n\n\t\t\t\tbody\n\t\t\t\t\t.on('appear', '[itemtype=\"http://schema.org/WebPageElement\"]', function(event, details) {\n\t\t\t\t\t\tif(details.priority === 1) {\n\t\t\t\t\t\t\titerator.seek(this.index);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tupdateImage(this);\n\n\t\t\t\t\t\tthis.observe = true;\n\t\t\t\t\t})\n\t\t\t\t\t.on('disappear', '[itemtype=\"http://schema.org/WebPageElement\"]', function() {\n\t\t\t\t\t\tdelete this.observe;\n\t\t\t\t\t})\n\t\t\t\t\t.on('click', '[href=\"#snippet\"]', function(event) {\n\t\t\t\t\t\tvar self = this;\n\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\t\tdemand('./snippet')\n\t\t\t\t\t\t\t.then(function(Snippet) {\n\t\t\t\t\t\t\t\tnew Snippet(self.parentNode);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\tfor(i = 0; section = sections[i]; i++) {\n\t\t\t\t\ttitle          = document.querySelector('#' + section.id + ' [itemprop=\"headline\"]').textContent;\n\t\t\t\t\tsection.index  = i;\n\t\t\t\t\tsection.image  = document.querySelector('#' + section.id + ' [itemprop=\"image\"]').getAttribute('content'),\n\t\t\t\t\tsection.marker = new DomElement('<a />', { href: '#' + section.id, itemprop: 'url', title: title }, { left: '48px', opacity: 0 })\n\t\t\t\t\t\t.setContent(title)\n\t\t\t\t\t\t.appendTo(navigation);\n\n\t\t\t\t\tnew DomElementAppear(section, { auto: 2 });\n\n\t\t\t\t\tmarkers.push(section.marker);\n\t\t\t\t}\n\n\t\t\t\twindow.on('resize orientationchange', functionDebounce(onResize));\n\t\t\t\tonResize();\n\n\t\t\t\titerator.setData(sections);\n\t\t\t\tnavigation.insertBefore('#github');\n\n\t\t\t\tdemand('legacy!/velocity')\n\t\t\t\t\t.then(function(Velocity) {\n\t\t\t\t\t\tfor(i = 0; marker = markers[i]; i++) {\n\t\t\t\t\t\t\tVelocity(marker.element, { left: 0, opacity: 1 }, { duration: 100, easing: 'easeOutQuad', delay: (i + 10) * 50 });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbody\n\t\t\t\t\t\t\t.on('click', '[itemtype=\"http://schema.org/SiteNavigationElement\"] a', function() {\n\t\t\t\t\t\t\t\tVelocity(document.getElementById(this.getAttribute('href').slice(1)), 'scroll', { duration: 600, easing: 'easeInOutCubic' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\n\t\t/**\n\t\t * further examples\n\t\t */\n\t\t/*\n\t\tdemand('/nucleus/url')\n\t\t\t.then(\n\t\t\t\tfunction(Url) {\n\t\t\t\t\tvar test = new Url('http://www.qoopido.com/index.php?test=1#top');\n\n\t\t\t\t\ttest.searchParams.set('blubb', true);\n\t\t\t\t\ttest.searchParams.remove('test');\n\n\t\t\t\t\tconsole.log(test.href);\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/component/sense')\n\t\t\t.then(\n\t\t\t\tfunction(componentSense) {\n\t\t\t\t\tvar sense1 = new componentSense('screen and (min-width: 600px)'),\n\t\t\t\t\t\tsense2 = new componentSense('screen and (min-width: 1000px)');\n\n\t\t\t\t\tconsole.log(sense1, sense2);\n\n\t\t\t\t\tsense1.on('match unmatch', function(event) {\n\t\t\t\t\t\tconsole.log('1', event);\n\t\t\t\t\t});\n\n\t\t\t\t\tsense2.on('match unmatch', function(event) {\n\t\t\t\t\t\tconsole.log('2', event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/component/iterator')\n\t\t\t.then(\n\t\t\t\tfunction(componentIterator) {\n\t\t\t\t\tvar test = new componentIterator()\n\t\t\t\t\t\t.on('preSeek', function(event, args) {\n\t\t\t\t\t\t\tconsole.log('=>', event, this.index);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('postSeek', function(event, args, returnValue) {\n\t\t\t\t\t\t\tconsole.log('=>', event, this.index);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.setData(document.querySelectorAll('[itemtype=\"http://schema.org/WebPageElement\"]'))\n\t\t\t\t\t\t.last();\n\n\t\t\t\t\tconsole.log(test.length);\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/support/method')\n\t\t\t.then(\n\t\t\t\tfunction(supportMethod) {\n\t\t\t\t\tdemand(supportMethod('matchMedia', true) || '/nucleus/polyfill/window/matchmedia')\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tfunction(matchMedia) {\n\t\t\t\t\t\t\t\tconsole.log('here', matchMedia);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/task')\n\t\t\t.then(\n\t\t\t\tfunction(Task) {\n\t\t\t\t\tnew Task(function() { return +new Date(); }).then(\n\t\t\t\t\t\tfunction(result) {\n\t\t\t\t\t\t\tconsole.log(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/support/test/element/video/mp4')\n\t\t\t.then(\n\t\t\t\tfunction(supportTestVideoMp4) {\n\t\t\t\t\tsupportTestVideoMp4.then(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tconsole.log('supports video.mp4');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tconsole.log('no support for video.mp4');\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tfunction(error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t);\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/dom/element')\n\t\t\t.then(function(DomElement) {\n\t\t\t\tvar body  = new DomElement('body'),\n\t\t\t\t\tdebug = new DomElement('<div />', { 'data-test': 'debug' })\n\t\t\t\t\t\t.setContent('debug')\n\t\t\t\t\t\t.appendTo(body);\n\n\t\t\t\tbody\n\t\t\t\t\t.on('click', '[data-test]',\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tconsole.log('click', arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/transport/xhr')\n\t\t\t.then(function(transportXhr) {\n\t\t\t\tvar xhr = new transportXhr('//cdn.jsdelivr.net/qoopido.demand/2.0.8/handler/text.js');\n\n\t\t\t\txhr\n\t\t\t\t\t.get()\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t\t*/\n\n\t\t/*\n\t\tdemand('/nucleus/dom/element', '/nucleus/dom/collection')\n\t\t\t.then(function(DomElement, DomCollection) {\n\t\t\t\tvar body  = new DomElement('body'),\n\t\t\t\t\ttest  = new DomElement('<div />'),\n\t\t\t\t\tdebug = new DomCollection('[itemtype=\"http://schema.org/WebPageElement\"]');\n\n\t\t\t\ttest\n\t\t\t\t\t.addClass('debug')\n\t\t\t\t\t.setContent('debug')\n\t\t\t\t\t.appendTo(body);\n\n\t\t\t\tbody.on('click', '.debug', function() {\n\t\t\t\t\tconsole.log('debug clicked');\n\t\t\t\t});\n\n\t\t\t\tconsole.log(debug, debug.length);\n\t\t\t});\n\t\t*/\n\n\t\treturn true;\n\t}\n\n\tprovide([ 'demand' ], definition);\n}(this, demand, provide));"],"sourceRoot":"/source/"}