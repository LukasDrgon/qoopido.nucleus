!function(e,t,n,i,o,r){"use strict";function a(n){n.configure({pattern:{"/nucleus":"//cdn.jsdelivr.net/qoopido.nucleus/1.1.1","/prism/js":"//cdn.jsdelivr.net/prism/1.4.1/prism.js","/prism/css":"//cdn.jsdelivr.net/prism/1.4.1/themes/prism-okaidia.css"},modules:{"/demand/handler/legacy":{"/prism/js":{probe:function(){return e.Prism}}}}});var i,a=Array.prototype.slice,c=t.documentElement,s=/(.+)\.(jp(e?)g|gif|png|webp)$/i,l=(t.location.hash||"#intro").substr(1),u={};return function(){var n=t.querySelector("#section-"+l),o=100*Math.ceil((e.innerWidth||c.clientWidth)/100),r=100*Math.ceil((e.innerHeight||c.clientHeight)/100),a=100*Math.min(2,e.devicePixelRatio||1).toFixed(2);i=n.querySelector('[itemprop="image"]').getAttribute("content").replace(s,"$1."+o+"x"+r+"@"+a+".$2"),n.style.backgroundImage="url("+i+")",t.addEventListener("touchstart",function(e){"a"!==e.target.nodeName.toLowerCase()&&e.preventDefault()},!1),t.addEventListener("touchmove",function(e){e.preventDefault()},!1),t.addEventListener("touchend",function(e){e.preventDefault()},!1)}(),n("/nucleus/dom/element","/nucleus/support/css/property").then(function(i,h){function d(){var t="";for(u.width=100*Math.ceil((e.innerWidth||c.clientWidth)/100),u.height=100*Math.ceil((e.innerHeight||c.clientHeight)/100),u.dpr=Math.min(2,e.devicePixelRatio||1),k=0;w=W[k];k++)t+='a[id="'+w.hash+'"]:target ~ main { '+h("transform")[0]+": translateY(-"+w.offsetTop+"px); }",w.observe&&v(w);P.styleSheet?P.styleSheet.cssText=t:P.textContent=t}function p(e){f(e.deltaY)}function m(e){var t,n,o,r=e.timeStamp,a=e.originalEvent.targetTouches;switch(e.type){case"touchstart":1===a.length&&(A.started=r,A.oy=a[0].clientY);break;case"touchmove":1===a.length&&(A.moved=r,A.ly=a[0].clientY);break;case"touchend":t=new i(e.target),A.moved?(n=A.ly-A.oy,o=n/(A.moved-A.started)||0,Math.abs(n)>10&&Math.abs(o)>.5?f(-n):t.emit("click")):t.emit("click"),A.started=null,A.moved=null;break;case"touchcancel":A.started=null,A.moved=null}}function f(e){b&&e&&(b[e>0?"next":"previous"](),W[b.index].marker.emit("click"))}function g(){var e=this;e.observe&&(e.style.backgroundImage="url("+e.image.replace(s,"$1."+u.width+"x"+u.height+"@"+100*u.dpr.toFixed(2)+".$2")+")")}function v(e){e.timeout&&r(e.timeout),e.timeout=o(g.bind(e),200)}function y(){this.setStyles({opacity:1,left:0,bottom:0})}var b,k,w,x,S,E=new i(e),M=new i(t.head||t.querySelector("head")),j=new i("body"),q=new i("<nav />",{itemscope:!0,itemtype:"http://schema.org/SiteNavigationElement",role:"navigation"}),P=t.createElement("style"),W=a.call(t.querySelectorAll('main [itemtype="http://schema.org/WebPageElement"]')),A={started:null,moved:null,oy:null,ly:null},T=[];for(P.type="text/css",n("/nucleus/function/debounce").then(function(e){E.on("mousewheel wheel",e(p,100)),E.on("touchstart touchmove touchend touchcancel",m)}),j.on("appear",'[itemtype="http://schema.org/WebPageElement"]',function(e,t){b&&1===t.priority&&b.seek(this.index),v(this),this.observe=!0}).on("disappear",'[itemtype="http://schema.org/WebPageElement"]',function(e,t){1===t.priority&&delete this.observe}).on("click",'[href="#snippet"]',function(e){var t=this;e.preventDefault(),e.stopPropagation(),n("./snippet").then(function(e){new e(t.parentNode)})}),k=0;w=W[k];k++)l=w.id.slice(8),x=t.querySelector("#"+w.id+' [itemprop="headline"]').textContent,w.hash=l,w.index=k,w.image=t.querySelector("#"+w.id+' [itemprop="image"]').getAttribute("content"),w.marker=new i("<a />",{href:"#"+l,itemprop:"url",title:x}).appendTo(q),w.setAttribute("data-hash",l),T.push(w.marker);for(q.insertBefore("#github"),M.append(P),k=0;S=T[k];k++)o(y.bind(S),25*k);n("/nucleus/dom/element/appear").then(function(e){for(k=0;w=W[k];k++)new e(w,{auto:2});n("/nucleus/function/debounce").then(function(e){E.on("resize orientationchange",e(d)).emit("resize")}),n("/nucleus/component/iterator").then(function(e){b=new e(null,{loop:!1}).on("preSeek postSeek",function(e){W[b&&b.index||0].marker.setAttribute("aria-selected","postSeek"===e?"true":"false")}).setData(W),n("./snippet","./ga")})})}),!0}i(["demand"],a)}(this,document,demand,provide,setTimeout,clearTimeout);
//# sourceMappingURL=main.js.map
